<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <title>Prospect 3 â€” Interactive Flipbook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="dark light">
  <style>
    :root{--bg:#0b1220;--card:#121a2d;--accent:#71d7ff;--accent2:#13d38b;--text:#e9f1ff;--muted:#9bb3cc;--glow:0 0 12px rgba(19,211,139,.6),0 0 24px rgba(19,211,139,.3);--grad1:#1f3663;--grad2:#16274b}
    *{box-sizing:border-box}html,body{margin:0;padding:0;background:radial-gradient(1200px 600px at 20% 10%,#0f1830 0%,#0b1220 50%,#091024 100%);color:var(--text);font-family:Inter,system-ui,Segoe UI,Arial}
    .topbar{position:sticky;top:0;z-index:10;height:60px;background:#0b1220cc;backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:space-between;padding:0 16px;border-bottom:1px solid #203055}
    .brand-title{font-weight:700;letter-spacing:.4px}.btn{border:none;padding:10px 14px;border-radius:12px;color:#fff;background:#1c2745;transition:transform .15s,box-shadow .15s,background .2s,filter .2s}
    .btn:hover{transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.25);filter:brightness(1.06)}
    .outline-btn{background:transparent;border:1px solid #2f4577}.glow-btn{background:linear-gradient(90deg,#13d38b,#71d7ff);color:#06233a;font-weight:700;box-shadow:var(--glow)}
    .gradient-btn{background:linear-gradient(120deg,#1d6bff,#13d38b);color:#021427;font-weight:700}.hidden{display:none}
    .start-screen{min-height:calc(100vh - 60px);display:flex;align-items:center;justify-content:center;padding:24px}
    .start-card{width:min(1100px,95vw);background:linear-gradient(160deg,#10192f,#0d1630 50%,#0b1429 100%);border:1px solid #23365f;box-shadow:0 20px 50px rgba(0,0,0,.35);border-radius:22px;padding:28px;overflow:hidden;animation:slideIn .6s ease-out both}
    @keyframes slideIn{from{transform:translateY(12px);opacity:0}to{transform:translateY(0);opacity:1}}
    .hero{display:flex;align-items:center;justify-content:space-between;gap:16px}.title{font-size:2.1rem;margin:0 0 8px}.subtitle{color:var(--muted);margin:0 0 12px}
    .hero-visual{position:relative;width:220px;height:120px}.orb{position:absolute;border-radius:50%;filter:blur(10px);opacity:.65}
    .orb1{width:90px;height:90px;background:#13d38b;top:8px;left:18px;animation:float1 6s ease-in-out infinite}
    .orb2{width:70px;height:70px;background:#71d7ff;top:26px;left:110px;animation:float2 7s ease-in-out infinite}
    .orb3{width:60px;height:60px;background:#eeaaff;top:70px;left:50px;animation:float3 8s ease-in-out infinite}
    @keyframes float1{0%{transform:translateY(0)}50%{transform:translateY(-8px)}100%{transform:translateY(0)}}
    @keyframes float2{0%{transform:translateY(0)}50%{transform:translateY(10px)}100%{transform:translateY(0)}}
    @keyframes float3{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
    .designer-bar{display:flex;align-items:center;gap:12px;padding:10px;border-radius:14px;margin-top:10px;background:linear-gradient(90deg,rgba(19,211,139,.10),rgba(113,215,255,.08));border:1px solid #2a455f;box-shadow:0 0 16px rgba(19,211,139,.15)}
    .designer-photo{width:64px;height:64px;border-radius:50%;object-fit:cover;border:2px solid #2a455f}
    .section-head{margin:18px 0 8px 0;color:#cfe7ff;font-size:1.1rem}
    .lesson-grid,.exam-grid,.tools-grid{display:grid;gap:12px;margin-top:10px}
    .lesson-grid{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.exam-grid{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}
    .tools-grid{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    .lesson-btn,.exam-btn{border:none;padding:16px;border-radius:16px;font-weight:700;background:linear-gradient(120deg,#1f3663,#16274b);color:#dff3ff;border:1px solid #2f4577;display:flex;align-items:center;justify-content:space-between}
    .flipbook-nav{display:flex;align-items:center;justify-content:space-between;padding:10px 16px}.nav-btn{font-size:20px;width:44px;height:44px;border-radius:12px}
    .current-title{font-weight:700;color:#cfe7ff}
    .flipbook{perspective:1500px;position:relative;width:min(1100px,96vw);margin:0 auto}
    .page{background:linear-gradient(180deg,#111b32,#0d162c);border:1px solid #2d426b;border-radius:16px;width:100%;min-height:68vh;margin:18px 0;padding:18px;box-shadow:0 30px 60px rgba(0,0,0,.35);transform-origin:left center;transition:transform .7s ease,opacity .4s ease}
    .page h2{margin-top:0;color:#cfe7ff;border-bottom:1px solid #253a65;padding-bottom:6px}.page-turn-enter{transform:rotateY(-180deg);opacity:1}.page-turn-leave{transform:rotateY(180deg);opacity:0}
    .section{margin:12px 0 20px;padding:12px;border:1px dashed #2f4577;border-radius:12px}.section h3{margin:0 0 8px;color:#9bd6ff}
    .text{line-height:1.85;color:#e4f0ff}.word{cursor:pointer;border-bottom:1px dashed #2f4577}.word:hover{color:#71d7ff}
    .exercise-item{padding:8px;border-radius:10px;background:#0f1a32;border:1px solid #2a4068;margin-bottom:8px}.exercise-controls{display:flex;gap:10px;margin-top:8px;flex-wrap:wrap}
    .answer-key{display:none;margin-top:6px;color:#bde8ff}.answer-key.show{display:block}.correct{outline:2px solid #13d38b}.incorrect{outline:2px solid #ff6e6e}
    .listening-card{background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;padding:18px;border-radius:16px;margin:18px 0;box-shadow:0 8px 20px rgba(0,0,0,.3)}
    .listening-text{line-height:1.85;font-size:1rem;margin-bottom:12px}
    .designer-footer{margin:24px 16px}
    .modal{position:fixed;inset:0;background:rgba(6,12,24,.6);display:flex;align-items:center;justify-content:center;padding:14px;z-index:100}
    .modal-content{width:min(900px,96vw);background:linear-gradient(160deg,#10192f,#0d1630);border:1px solid #20355f;border-radius:18px;padding:16px;box-shadow:0 20px 50px rgba(0,0,0,.35)}
    .popup{position:fixed;bottom:24px;right:24px;z-index:101}
    .popup-content{width:min(420px,92vw);background:#0f1a32;border:1px solid #2a4068;border-radius:14px;box-shadow:0 12px 36px rgba(0,0,0,.35)}
    .popup-header{display:flex;align-items:center;justify-content:space-between;padding:10px;border-bottom:1px solid #233a60}
    #popupWord{font-weight:800;color:#9bd6ff}.popup-body{padding:10px}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="left-controls"><button class="btn glow-btn" id="musicBtn">â™« Ù…ÙˆØ³ÛŒÙ‚ÛŒ</button></div>
    <div class="brand-title">Prospect 3 â€” Interactive Flipbook</div>
    <div class="right-controls"><button class="btn outline-btn" id="helpBtn">Ø±Ø§Ù‡Ù†Ù…Ø§</button></div>
  </header>

  <section class="start-screen" id="startScreen">
    <div class="start-card">
      <div class="hero">
        <div>
          <h1 class="title">English for Schools â€” Prospect 3</h1>
          <p class="subtitle">Lessons â€¢ Practice â€¢ Workbook â€¢ Audio â€¢ Photo Dictionary â€¢ Exams</p>
        </div>
        <div class="hero-visual" aria-hidden="true"><div class="orb orb1"></div><div class="orb orb2"></div><div class="orb orb3"></div></div>
      </div>

      <div class="designer-bar">
        <img class="designer-photo" src="https://s34.picofile.com/file/8488183492/2.png" alt="Designer" />
        <div><div>Designer</div><div>A.R. Yousefzadeh</div></div>
      </div>

      <h2 class="section-head">Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø±Ø³</h2>
      <div class="lesson-grid">
        <button class="lesson-btn" data-lesson="1"><span>Lesson 1</span><small>&nbsp;Personality</small></button>
        <button class="lesson-btn" data-lesson="2"><span>Lesson 2</span><small>&nbsp;Travel</small></button>
        <button class="lesson-btn" data-lesson="3"><span>Lesson 3</span><small>&nbsp;Festivals & Ceremonies</small></button>
      </div>

      <h2 class="section-head">Ø¢Ø²Ù…ÙˆÙ†â€ŒÙ‡Ø§</h2>
      <div class="exam-grid">
        <button class="exam-btn" data-exam="midterm-1-3">Midterm A â€” Lessons 1â€“3</button>
      </div>

      <h2 class="section-head">Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§</h2>
      <div class="tools-grid">
        <button class="btn gradient-btn" id="irregularVerbsBtn">Ø§ÙØ¹Ø§Ù„ Ø¨ÛŒâ€ŒÙ‚Ø§Ø¹Ø¯Ù‡ + ØªÙ„ÙØ¸ + Ù…Ø«Ø§Ù„</button>
        <button class="btn gradient-btn" id="openVocabTrainerBtn">ÙˆØ§Ú˜Ù‡â€ŒÙ†Ø§Ù…Ù‡ ØªØ¹Ø§Ù…Ù„ÛŒ</button>
      </div>
    </div>
  </section>

  <main id="flipbookWrapper" class="hidden">
    <div class="flipbook-nav">
      <button class="btn nav-btn" id="prevPageBtn">â€¹</button>
      <div class="current-title" id="currentTitle"></div>
      <button class="btn nav-btn" id="nextPageBtn">â€º</button>
    </div>
    <div class="flipbook" id="flipbook"></div>
    <footer class="designer-footer">
      <div class="designer-bar">
        <img class="designer-photo" src="https://s34.picofile.com/file/8488183492/2.png" alt="Designer" />
        <div><div>Designer</div><div>A.R. Yousefzadeh</div></div>
      </div>
    </footer>
  </main>

  <div class="modal hidden" id="helpModal"><div class="modal-content"><h2>Ø±Ø§Ù‡Ù†Ù…Ø§</h2><p>Ø¨Ø§ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ â€¹ Ùˆ â€º ÙˆØ±Ù‚ Ø¨Ø²Ù†ÛŒØ¯. Ø±ÙˆÛŒ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ ØªØ§ Ù…Ø¹Ù†ÛŒ Ùˆ ØªÙ„ÙØ¸ Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯.</p><button class="btn outline-btn" id="closeHelpBtn">Ø¨Ø³ØªÙ†</button></div></div>
  <div class="popup hidden" id="wordPopup"><div class="popup-content"><div class="popup-header"><span id="popupWord"></span><div><button class="btn" id="pronounceBtn">ğŸ”Š</button><button class="btn" id="closePopupBtn">âœ•</button></div></div><div class="popup-body" id="popupBody"></div></div></div>

  <div class="modal hidden" id="verbsModal"><div class="modal-content"><h2>Ø§ÙØ¹Ø§Ù„ Ø¨ÛŒâ€ŒÙ‚Ø§Ø¹Ø¯Ù‡</h2><div class="verbs-body" id="verbsBody"></div><button class="btn outline-btn" id="closeVerbsBtn">Ø¨Ø³ØªÙ†</button></div></div>
  <div class="modal hidden" id="vocabModal"><div class="modal-content"><h2>ÙˆØ§Ú˜Ù‡â€ŒÙ†Ø§Ù…Ù‡</h2><input id="vocabSearch" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ ÙˆØ§Ú˜Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ..."/><div id="vocabResult" style="margin-top:8px"></div><button class="btn outline-btn" id="closeVocabBtn">Ø¨Ø³ØªÙ†</button></div></div>
  <div class="modal hidden" id="examModal"><div class="modal-content"><h2 id="examTitle"></h2><div id="examBody"></div><div style="margin-top:10px"><button class="btn glow-btn" id="submitExamBtn">Ø«Ø¨Øª</button><button class="btn outline-btn" id="showExamAnswersBtn">Ù¾Ø§Ø³Ø®Ù†Ø§Ù…Ù‡</button><button class="btn outline-btn" id="closeExamBtn">Ø¨Ø³ØªÙ†</button></div></div></div>

  <script>
    const startScreen=document.getElementById('startScreen');const flipbookWrapper=document.getElementById('flipbookWrapper');const flipbookEl=document.getElementById('flipbook');const currentTitleEl=document.getElementById('currentTitle');
    const prevPageBtn=document.getElementById('prevPageBtn');const nextPageBtn=document.getElementById('nextPageBtn');const helpBtn=document.getElementById('helpBtn');const helpModal=document.getElementById('helpModal');const closeHelpBtn=document.getElementById('closeHelpBtn');
    const irregularVerbsBtn=document.getElementById('irregularVerbsBtn');const verbsModal=document.getElementById('verbsModal');const closeVerbsBtn=document.getElementById('closeVerbsBtn');const verbsBody=document.getElementById('verbsBody');
    const vocabModal=document.getElementById('vocabModal');const closeVocabBtn=document.getElementById('closeVocabBtn');const openVocabTrainerBtn=document.getElementById('openVocabTrainerBtn');const vocabSearch=document.getElementById('vocabSearch');const vocabResult=document.getElementById('vocabResult');
    const examModal=document.getElementById('examModal');const examTitle=document.getElementById('examTitle');const examBody=document.getElementById('examBody');const closeExamBtn=document.getElementById('closeExamBtn');const submitExamBtn=document.getElementById('submitExamBtn');const showExamAnswersBtn=document.getElementById('showExamAnswersBtn');
    const wordPopup=document.getElementById('wordPopup');const popupWord=document.getElementById('popupWord');const popupBody=document.getElementById('popupBody');const closePopupBtn=document.getElementById('closePopupBtn');const pronounceBtn=document.getElementById('pronounceBtn');

    const LESSONS=[{id:1,title:"Lesson 1 â€” Personality",sections:[
      {type:"conversation",title:"Conversation",text:`Ehsan: Who is your best friend at school?
Parham: Reza.
Ehsan: What's he like?
Parham: He's clever and kind.`},
      {type:"practice",title:"Practice",items:[{q:"Is he clever?",a:"Yes, he is."},{q:"Are you kind?",a:"Yes, I am."}]},
      {type:"listeningCard",title:"Listening A",audio:"",text:`Iran is a great country.`}
    ]}];
    const DICT={"clever":{fa:"Ø¨Ø§Ù‡ÙˆØ´",syn:["smart"],rel:["bright"],ex:"He is a clever student."},"kind":{fa:"Ù…Ù‡Ø±Ø¨Ø§Ù†",syn:["nice"],rel:["friendly"],ex:"She is kind to everyone."}};
    const EXAMS={"midterm-1-3":{title:"Midterm â€” Lessons 1â€“3",questions:[{type:"mc",q:"They __ kind.",opts:["is","are","am"],key:"are"},{type:"fill",q:"He __ clever. (is/are)",key:"is"}]}};
    const IRREGULAR_VERBS=[{base:"be",past:"was/were",exEn:"I was happy.",exFa:"Ù…Ù† Ø®ÙˆØ´Ø­Ø§Ù„ Ø¨ÙˆØ¯Ù…."},{base:"go",past:"went",exEn:"She went home.",exFa:"Ø§Ùˆ Ø¨Ù‡ Ø®Ø§Ù†Ù‡ Ø±ÙØª."}];

    let currentLesson=null,pages=[],currentPageIndex=0,currentExam=null;

    document.querySelectorAll('.lesson-btn').forEach(b=>b.addEventListener('click',()=>loadLesson(parseInt(b.dataset.lesson,10))));
    helpBtn.addEventListener('click',()=>helpModal.classList.remove('hidden'));closeHelpBtn.addEventListener('click',()=>helpModal.classList.add('hidden'));
    irregularVerbsBtn.addEventListener('click',()=>{renderVerbs();verbsModal.classList.remove('hidden');});closeVerbsBtn.addEventListener('click',()=>verbsModal.classList.add('hidden'));
    openVocabTrainerBtn.addEventListener('click',()=>{vocabModal.classList.remove('hidden');vocabSearch.value="";vocabResult.textContent="ÛŒÚ© ÙˆØ§Ú˜Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...";});closeVocabBtn.addEventListener('click',()=>vocabModal.classList.add('hidden'));
    closeExamBtn.addEventListener('click',()=>{examModal.classList.add('hidden');currentExam=null;});submitExamBtn.addEventListener('click',gradeExam);showExamAnswersBtn.addEventListener('click',showExamAnswers);
    prevPageBtn.addEventListener('click',()=>turnPage(-1));nextPageBtn.addEventListener('click',()=>turnPage(1));
    closePopupBtn.addEventListener('click',()=>wordPopup.classList.add('hidden'));pronounceBtn.addEventListener('click',()=>pronounce(popupWord.textContent));
    document.addEventListener('keydown',(e)=>{if(e.key==='ArrowRight')turnPage(1);if(e.key==='ArrowLeft')turnPage(-1);if(e.key==='Escape'){helpModal.classList.add('hidden');verbsModal.classList.add('hidden');examModal.classList.add('hidden');vocabModal.classList.add('hidden');wordPopup.classList.add('hidden');}});

    vocabSearch.addEventListener('input',()=>{const q=vocabSearch.value.trim().toLowerCase();if(!q){vocabResult.textContent="ÛŒÚ© ÙˆØ§Ú˜Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...";return;}const info=DICT[q];vocabResult.innerHTML=info?`<b>${q}</b><div>Ù…Ø¹Ù†ÛŒ: ${info.fa}</div><div>Ù…Ø«Ø§Ù„: ${info.ex}</div>`:`ÙˆØ±ÙˆØ¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯`;});

    function loadLesson(id){const lesson=LESSONS.find(l=>l.id===id);if(!lesson){alert("Lesson not found");return;}currentLesson=lesson;startScreen.classList.add('hidden');flipbookWrapper.classList.remove('hidden');currentTitleEl.textContent=lesson.title;pages=lesson.sections.map(s=>sectionToPage(s));currentPageIndex=0;renderFlipbook();}
    function renderFlipbook(){flipbookEl.innerHTML="";pages.forEach((p,i)=>{const el=document.createElement('div');el.className='page';el.dataset.index=i;el.innerHTML=p.html;flipbookEl.appendChild(el);});bindPageEvents();highlightCurrentPage();}
    function bindPageEvents(){flipbookEl.querySelectorAll('.word').forEach(w=>w.addEventListener('click',()=>showWordInfo(w.textContent.trim().toLowerCase())));flipbookEl.querySelectorAll('.reveal-key').forEach(b=>b.addEventListener('click',()=>{const key=b.closest('.exercise-item').querySelector('.answer-key');key.classList.toggle('show');}));flipbookEl.querySelectorAll('.listen-btn').forEach(btn=>{const audio=btn.nextElementSibling;btn.addEventListener('click',()=>audio&&audio.play().catch(()=>{}));});flipbookEl.querySelectorAll('.check-input').forEach(b=>b.addEventListener('click',()=>{const item=b.closest('.exercise-item');const input=item.querySelector('input,textarea,select');const key=(item.dataset.key||"").trim().toLowerCase();if(!input)return;const val=(input.value||"").trim().toLowerCase();if(val===key||key.includes(val)){input.classList.add('correct');input.classList.remove('incorrect');}else{input.classList.add('incorrect');input.classList.remove('correct');}}));}
    function highlightCurrentPage(){flipbookEl.querySelectorAll('.page').forEach((p,i)=>{p.classList.remove('page-turn-enter','page-turn-leave');p.classList.add(i===currentPageIndex?'page-turn-enter':'page-turn-leave');});}
    function turnPage(dir){const next=currentPageIndex+dir;if(next<0||next>=pages.length)return;currentPageIndex=next;highlightCurrentPage();}
    function sectionToPage(sec){const title=`<h2>${sec.title}</h2>`;let body="";if(sec.type==="conversation"){body+=`<div class="section"><h3>${sec.title}</h3><div class="text">${inlineWords(sec.text)}</div></div>`;}
      if(sec.type==="practice"){body+=`<div class="section"><h3>${sec.title}</h3>${sec.items.map(it=>`<div class="exercise-item" data-key="${(it.a||'').toLowerCase()}"><div><b>Q:</b> ${inlineWords(it.q)}</div><div class="exercise-controls"><input type="text" placeholder="Ù¾Ø§Ø³Ø® Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯"/><button class="btn check-input">Ø¨Ø±Ø±Ø³ÛŒ</button><button class="btn outline-btn reveal-key">Ù†Ù…Ø§ÛŒØ´ Ù¾Ø§Ø³Ø®</button></div><div class="answer-key"><b>Answer:</b> ${it.a}</div></div>`).join("")}</div>`;}
      if(sec.type==="listeningCard"){body+=`<div class="listening-card"><h2>ğŸ§ ${sec.title}</h2><p class="listening-text">${nl2br(inlineWords(sec.text||""))}</p><button class="listen-btn">â–¶ Ù¾Ø®Ø´ ØµÙˆØª</button><audio src="${sec.audio}"></audio></div>`;}
      return {html:`${title}${body}`};}
    function inlineWords(t){return String(t).replace(/\b([A-Za-z][A-Za-z\-']+)\b/g,(m)=>`<span class="word">${m}</span>`);}function nl2br(s){return String(s).replace(/\n/g,"<br/>");}
    function showWordInfo(word){const info=DICT[word];popupWord.textContent=word;popupBody.innerHTML=info?`<div>Ù…Ø¹Ù†ÛŒ: ${info.fa}</div><div>Ù…Ø«Ø§Ù„: ${info.ex}</div>`:`ÙˆØ§Ú˜Ù‡ ÛŒØ§ÙØª Ù†Ø´Ø¯`;wordPopup.classList.remove('hidden');}
    function pronounce(text){if(!window.speechSynthesis){alert("Speech Synthesis Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.");return;}const u=new SpeechSynthesisUtterance(text);u.lang='en-US';window.speechSynthesis.speak(u);}
    function openExam(key){const exam=EXAMS[key];if(!exam){alert("Exam not found");return;}currentExam=exam;examTitle.textContent=exam.title;examBody.innerHTML=exam.questions.map((q,i)=>renderQ(q,i)).join("");examModal.classList.remove('hidden');}
    function renderQ(q,i){if(q.type==="mc"){return `<div class="exam-question" data-key="${(q.key||'').toLowerCase()}"><h4>Q${i+1}. ${q.q}</h4>${q.opts.map(o=>`<label style="display:block;margin:4px 0;"><input type="radio" name="q${i}" value="${o.toLowerCase()}"/> ${o}</label>`).join("")}</div>`;}
      if(q.type==="fill"){return `<div class="exam-question" data-key="${(q.key||'').toLowerCase()}"><h4>Q${i+1}. ${q.q}</h4><input type="text" placeholder="Ù¾Ø§Ø³Ø®"/></div>`;}return "";}
    function gradeExam(){if(!currentExam)return;const qs=examBody.querySelectorAll('.exam-question');let score=0,total=0;qs.forEach(q=>{const key=(q.dataset.key||"").trim();const radios=q.querySelectorAll('input[type="radio"]');const input=q.querySelector('input[type="text"]');if(radios.length){total++;const chosen=[...radios].find(r=>r.checked);if(chosen&&chosen.value===key){score++;q.classList.add('correct');}else{q.classList.add('incorrect');}}else if(input){total++;const val=(input.value||"").trim().toLowerCase();if(val===key){score++;q.classList.add('correct');}else{q.classList.add('incorrect');}}});alert(`Ù†Ù…Ø±Ù‡: ${score} Ø§Ø² ${total}`);}
    function showExamAnswers(){if(!currentExam)return;examBody.querySelectorAll('.exam-question').forEach(q=>{const key=(q.dataset.key||"").trim();if(key){const d=document.createElement('div');d.style.marginTop='6px';d.style.color='#bde8ff';d.innerHTML=`<b>Answer:</b> ${key}`;q.appendChild(d);}});}
    document.querySelector('[data-exam="midterm-1-3"]').addEventListener('click',()=>openExam('midterm-1-3'));
  </script>
</body>
</html>

